{"ast":null,"code":"import { VillainService } from './villain.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./villain.service\";\nimport * as i2 from \"../shared/list-header.component\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"../shared/modal.component\";\nimport * as i5 from \"./villain-list.component\";\nimport * as i6 from \"./villain-detail.component\";\n\nfunction VillainsComponent_div_3_app_villain_list_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"app-villain-list\", 8);\n    i0.ɵɵlistener(\"selected\", function VillainsComponent_div_3_app_villain_list_1_Template_app_villain_list_selected_0_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r4 = i0.ɵɵnextContext(2);\n      return ctx_r4.select($event);\n    })(\"deleted\", function VillainsComponent_div_3_app_villain_list_1_Template_app_villain_list_deleted_0_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r6 = i0.ɵɵnextContext(2);\n      return ctx_r6.askToDelete($event);\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const villains_r1 = i0.ɵɵnextContext().ngIf;\n    i0.ɵɵproperty(\"villains\", villains_r1);\n  }\n}\n\nfunction VillainsComponent_div_3_app_villain_detail_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"app-villain-detail\", 9);\n    i0.ɵɵlistener(\"unselect\", function VillainsComponent_div_3_app_villain_detail_2_Template_app_villain_detail_unselect_0_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext(2);\n      return ctx_r8.clear();\n    })(\"save\", function VillainsComponent_div_3_app_villain_detail_2_Template_app_villain_detail_save_0_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r10 = i0.ɵɵnextContext(2);\n      return ctx_r10.save($event);\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"villain\", ctx_r3.selected);\n  }\n}\n\nfunction VillainsComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 5);\n    i0.ɵɵtemplate(1, VillainsComponent_div_3_app_villain_list_1_Template, 1, 1, \"app-villain-list\", 6);\n    i0.ɵɵtemplate(2, VillainsComponent_div_3_app_villain_detail_2_Template, 1, 1, \"app-villain-detail\", 7);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.selected);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.selected);\n  }\n}\n\nexport let VillainsComponent = /*#__PURE__*/(() => {\n  class VillainsComponent {\n    constructor(villainService) {\n      this.villainService = villainService;\n      this.message = '?';\n      this.showModal = false;\n      this.villains$ = villainService.entities$;\n    }\n\n    ngOnInit() {\n      this.getVillains();\n    }\n\n    add(villain) {\n      this.villainService.add(villain);\n    }\n\n    askToDelete(villain) {\n      this.villainToDelete = villain;\n      this.showModal = true;\n\n      if (this.villainToDelete.name) {\n        this.message = `Would you like to delete ${this.villainToDelete.name}?`;\n      }\n    }\n\n    clear() {\n      this.selected = null;\n    }\n\n    closeModal() {\n      this.showModal = false;\n    }\n\n    deleteVillain() {\n      this.closeModal();\n\n      if (this.villainToDelete) {\n        this.villainService.delete(this.villainToDelete.id).subscribe(() => this.villainToDelete = null);\n      }\n\n      this.clear();\n    }\n\n    enableAddMode() {\n      this.selected = {};\n    }\n\n    getVillains() {\n      this.villainService.getAll();\n      this.clear();\n    }\n\n    save(villain) {\n      if (this.selected && this.selected.name) {\n        this.update(villain);\n      } else {\n        this.add(villain);\n      }\n    }\n\n    select(villain) {\n      this.selected = villain;\n    }\n\n    update(villain) {\n      this.villainService.update(villain);\n    }\n\n  }\n\n  VillainsComponent.ɵfac = function VillainsComponent_Factory(t) {\n    return new (t || VillainsComponent)(i0.ɵɵdirectiveInject(i1.VillainService));\n  };\n\n  VillainsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: VillainsComponent,\n    selectors: [[\"app-villains\"]],\n    decls: 6,\n    vars: 5,\n    consts: [[1, \"content-container\"], [\"title\", \"Villains\", 3, \"add\", \"refresh\"], [1, \"columns\", \"is-multiline\", \"is-variable\"], [\"class\", \"column is-8\", 4, \"ngIf\"], [1, \"modal-villain\", 3, \"message\", \"isOpen\", \"handleNo\", \"handleYes\"], [1, \"column\", \"is-8\"], [3, \"villains\", \"selected\", \"deleted\", 4, \"ngIf\"], [3, \"villain\", \"unselect\", \"save\", 4, \"ngIf\"], [3, \"villains\", \"selected\", \"deleted\"], [3, \"villain\", \"unselect\", \"save\"]],\n    template: function VillainsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"app-list-header\", 1);\n        i0.ɵɵlistener(\"add\", function VillainsComponent_Template_app_list_header_add_1_listener() {\n          return ctx.enableAddMode();\n        })(\"refresh\", function VillainsComponent_Template_app_list_header_refresh_1_listener() {\n          return ctx.getVillains();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(2, \"div\", 2);\n        i0.ɵɵtemplate(3, VillainsComponent_div_3_Template, 3, 2, \"div\", 3);\n        i0.ɵɵpipe(4, \"async\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"app-modal\", 4);\n        i0.ɵɵlistener(\"handleNo\", function VillainsComponent_Template_app_modal_handleNo_5_listener() {\n          return ctx.closeModal();\n        })(\"handleYes\", function VillainsComponent_Template_app_modal_handleYes_5_listener() {\n          return ctx.deleteVillain();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(4, 3, ctx.villains$));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"message\", ctx.message)(\"isOpen\", ctx.showModal);\n      }\n    },\n    directives: [i2.ListHeaderComponent, i3.NgIf, i4.ModalComponent, i5.VillainListComponent, i6.VillainDetailComponent],\n    pipes: [i3.AsyncPipe],\n    encapsulation: 2\n  });\n  return VillainsComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import { HeroService } from './hero.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./hero.service\";\nimport * as i2 from \"../shared/list-header.component\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"../shared/modal.component\";\nimport * as i5 from \"./hero-list.component\";\nimport * as i6 from \"./hero-detail.component\";\n\nfunction HeroesComponent_div_3_app_hero_list_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"app-hero-list\", 8);\n    i0.ɵɵlistener(\"selected\", function HeroesComponent_div_3_app_hero_list_1_Template_app_hero_list_selected_0_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r4 = i0.ɵɵnextContext(2);\n      return ctx_r4.select($event);\n    })(\"deleted\", function HeroesComponent_div_3_app_hero_list_1_Template_app_hero_list_deleted_0_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r6 = i0.ɵɵnextContext(2);\n      return ctx_r6.askToDelete($event);\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const heroes_r1 = i0.ɵɵnextContext().ngIf;\n    i0.ɵɵproperty(\"heroes\", heroes_r1);\n  }\n}\n\nfunction HeroesComponent_div_3_app_hero_detail_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"app-hero-detail\", 9);\n    i0.ɵɵlistener(\"unselect\", function HeroesComponent_div_3_app_hero_detail_2_Template_app_hero_detail_unselect_0_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext(2);\n      return ctx_r8.clear();\n    })(\"save\", function HeroesComponent_div_3_app_hero_detail_2_Template_app_hero_detail_save_0_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r10 = i0.ɵɵnextContext(2);\n      return ctx_r10.save($event);\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"hero\", ctx_r3.selected);\n  }\n}\n\nfunction HeroesComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 5);\n    i0.ɵɵtemplate(1, HeroesComponent_div_3_app_hero_list_1_Template, 1, 1, \"app-hero-list\", 6);\n    i0.ɵɵtemplate(2, HeroesComponent_div_3_app_hero_detail_2_Template, 1, 1, \"app-hero-detail\", 7);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.selected);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.selected);\n  }\n}\n\nexport let HeroesComponent = /*#__PURE__*/(() => {\n  class HeroesComponent {\n    constructor(heroService) {\n      this.heroService = heroService;\n      this.message = '?';\n      this.showModal = false;\n      this.heroes$ = heroService.entities$;\n    }\n\n    ngOnInit() {\n      this.getHeroes();\n    }\n\n    add(hero) {\n      this.heroService.add(hero);\n    }\n\n    askToDelete(hero) {\n      this.heroToDelete = hero;\n      this.showModal = true;\n\n      if (this.heroToDelete.name) {\n        this.message = `Would you like to delete ${this.heroToDelete.name}?`;\n      }\n    }\n\n    clear() {\n      this.selected = null;\n    }\n\n    closeModal() {\n      this.showModal = false;\n    }\n\n    deleteHero() {\n      this.closeModal();\n\n      if (this.heroToDelete) {\n        this.heroService.delete(this.heroToDelete.id).subscribe(() => this.heroToDelete = null);\n      }\n\n      this.clear();\n    }\n\n    enableAddMode() {\n      this.selected = {};\n    }\n\n    getHeroes() {\n      this.heroService.getAll();\n      this.clear();\n    }\n\n    save(hero) {\n      if (this.selected && this.selected.name) {\n        this.update(hero);\n      } else {\n        this.add(hero);\n      }\n    }\n\n    select(hero) {\n      this.selected = hero;\n    }\n\n    update(hero) {\n      this.heroService.update(hero);\n    }\n\n  }\n\n  HeroesComponent.ɵfac = function HeroesComponent_Factory(t) {\n    return new (t || HeroesComponent)(i0.ɵɵdirectiveInject(i1.HeroService));\n  };\n\n  HeroesComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: HeroesComponent,\n    selectors: [[\"app-heroes\"]],\n    decls: 6,\n    vars: 5,\n    consts: [[1, \"content-container\"], [\"title\", \"Heroes\", 3, \"add\", \"refresh\"], [1, \"columns\", \"is-multiline\", \"is-variable\"], [\"class\", \"column is-8\", 4, \"ngIf\"], [1, \"modal-hero\", 3, \"message\", \"isOpen\", \"handleNo\", \"handleYes\"], [1, \"column\", \"is-8\"], [3, \"heroes\", \"selected\", \"deleted\", 4, \"ngIf\"], [3, \"hero\", \"unselect\", \"save\", 4, \"ngIf\"], [3, \"heroes\", \"selected\", \"deleted\"], [3, \"hero\", \"unselect\", \"save\"]],\n    template: function HeroesComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"app-list-header\", 1);\n        i0.ɵɵlistener(\"add\", function HeroesComponent_Template_app_list_header_add_1_listener() {\n          return ctx.enableAddMode();\n        })(\"refresh\", function HeroesComponent_Template_app_list_header_refresh_1_listener() {\n          return ctx.getHeroes();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(2, \"div\", 2);\n        i0.ɵɵtemplate(3, HeroesComponent_div_3_Template, 3, 2, \"div\", 3);\n        i0.ɵɵpipe(4, \"async\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"app-modal\", 4);\n        i0.ɵɵlistener(\"handleNo\", function HeroesComponent_Template_app_modal_handleNo_5_listener() {\n          return ctx.closeModal();\n        })(\"handleYes\", function HeroesComponent_Template_app_modal_handleYes_5_listener() {\n          return ctx.deleteHero();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(4, 3, ctx.heroes$));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"message\", ctx.message)(\"isOpen\", ctx.showModal);\n      }\n    },\n    directives: [i2.ListHeaderComponent, i3.NgIf, i4.ModalComponent, i5.HeroListComponent, i6.HeroDetailComponent],\n    pipes: [i3.AsyncPipe],\n    encapsulation: 2\n  });\n  return HeroesComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}